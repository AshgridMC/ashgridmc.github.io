<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ashgrid Anarchy</title>
 <link rel="icon" href="favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #ff4444;
      --primary-glow: #ff2222;
      --secondary: #00ff88;
      --background: #0a0a0a;
      --card-bg: rgba(20, 20, 20, 0.8);
      --text: #f4f4f4;
      --accent: #ffaa00;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: radial-gradient(ellipse at top, #1a1a1a, #000),
                  linear-gradient(to bottom, #0a0a0a, #000);
      color: var(--text);
      font-family: 'Share Tech Mono', monospace;
      min-height: 100vh;
      margin: 0;
      text-align: center;
      overflow-x: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    body::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255, 68, 68, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(0, 255, 136, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    .top-nav {
      position: absolute;
      top: 16px;
      right: 20px;
      display: flex;
      gap: 10px;
      z-index: 40;
    }

    .nav-link {
      color: var(--text);
      border: 1px solid rgba(255,68,68,0.2);
      background: rgba(20,20,20,0.6);
      padding: 0.4rem 0.7rem;
      border-radius: 6px;
      text-decoration: none;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.9rem;
      transition: transform .15s, box-shadow .15s;
    }

    .nav-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 10px rgba(255,34,34,0.2);
    }

    /* MAIN content container is a centered column with max-width */
    #main-content {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center; /* centers everything inside */
      gap: 1.5rem;
    }

    .glitch-container { position: relative; margin: 2rem 0; }

    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 3.2em;
      color: var(--primary);
      text-shadow: 0 0 20px var(--primary-glow), 0 0 40px var(--primary-glow);
      margin-bottom: 0.25em;
      letter-spacing: 3px;
      position: relative;
      animation: glitch 5s infinite;
    }

    @keyframes glitch {
      0%, 100% { transform: translate(0); }
      5% { transform: translate(-2px, 2px); }
      10% { transform: translate(2px, -2px); }
      15% { transform: translate(-2px, -2px); }
      20% { transform: translate(2px, 2px); }
      50% { transform: translate(0); }
    }

    .subtitle { font-size: 1.05em; color: var(--secondary); margin-bottom: 1rem; text-shadow: 0 0 10px rgba(0,255,136,0.35); }

    .server-info {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
      width: 100%;
    }

    .info-box {
      background: var(--card-bg);
      border: 1px solid var(--primary);
      border-radius: 10px;
      padding: 1.5rem;
      width: 100%;
      max-width: 520px;
      box-shadow: 0 0 20px rgba(255, 34, 34, 0.18);
      text-align: center;
      position: relative;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      margin: 0 auto;
    }

    .info-box:hover { transform: translateY(-6px); box-shadow: 0 0 30px rgba(255, 34, 34, 0.45); }

    .info-box::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }

    h2 {
      color: var(--primary);
      border-bottom: 1px solid rgba(255,68,68,0.12);
      padding-bottom: 0.4rem;
      margin-bottom: 0.75rem;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.4em;
      text-align: center;
    }

    h3 { color: var(--secondary); margin: 1rem 0 0.4rem; font-size: 1.05em; }

    .server-address {
      display:flex;
      align-items:center;
      gap:10px;
      margin:0.7rem 0;
      justify-content:center;
      flex-wrap: wrap;
    }

    code {
      background: #111;
      color: var(--secondary);
      padding: 0.4rem 0.9rem;
      border-radius: 5px;
      font-family: 'Share Tech Mono', monospace;
      border: 1px solid rgba(0,255,136,0.18);
      display: inline-block;
      margin: 0 auto;
      white-space: nowrap;
    }

    .copy-btn {
      background: rgba(255,68,68,0.18);
      color: var(--primary);
      border: 1px solid var(--primary);
      border-radius: 5px;
      padding: 0.45rem 0.9rem;
      cursor: pointer;
      transition: all 0.22s;
      font-family: 'Share Tech Mono', monospace;
    }

    .copy-btn:hover { background: rgba(255,68,68,0.36); box-shadow: 0 0 10px rgba(255,68,68,0.4); }
    .copy-btn.copied { background: rgba(0,255,136,0.16); color: var(--secondary); border-color: var(--secondary); }

    .warning { background: rgba(255,170,0,0.08); border: 1px solid var(--accent); border-radius:5px; padding:0.9rem; margin-top:1rem; color:var(--accent); text-align:center; }

    .rules {
      margin-top: 1.5rem;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .rules h2 { text-align: center; margin-bottom: 1rem; font-size:1.1rem; }

    .rules-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1rem;
      width: 100%;
      justify-items: center;
      align-items: start;
    }

    .rule-item {
      background: rgba(30,30,30,0.6);
      border: 1px solid rgba(255,68,68,0.18);
      border-radius: 8px;
      padding: 1.25rem;
      text-align: center;
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
    }

    .rule-item h3 { color: var(--primary); margin-top: 0; font-size: 1.02em; border-bottom: 1px solid rgba(255,68,68,0.12); padding-bottom:0.45rem; text-align:center; }
    .rule-item p { margin-top: 0.6rem; line-height: 1.45; font-size:0.95rem; }
    .rule-item strong { color: var(--primary); } .rule-item em { color: var(--accent); }

    .terminal {
      background: #000;
      border: 1px solid var(--secondary);
      border-radius: 6px;
      padding: 1rem;
      margin-top: 1.5rem;
      font-family: 'Share Tech Mono', monospace;
      text-align: center;
      max-width: 900px;
      width: 100%;
      margin-left: auto;
      margin-right: auto;
    }

    .terminal-line { margin: 0.45rem 0; display:block; }
    .terminal-prompt { color: var(--secondary); display:inline-block; margin-right:0.5rem; }
    .terminal-command { color: var(--text); display:inline-block; }
    .terminal-output { color: #aaa; }

    footer {
      margin-top: 2rem;
      padding: 1.25rem;
      font-size: 0.9em;
      color: #aaa;
      border-top: 1px solid rgba(255,68,68,0.12);
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    /* Timeline wrapper + Back button styling */
    .timeline-wrapper {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      padding-bottom: 1rem;
    }
    .timeline-header {
      width: 100%;
      display: flex;
      justify-content: flex-start; /* back button aligned left within wrapper */
    }
    #timeline-back {
      margin-left: 0;
      margin-bottom: 0.5rem;
    }

    /* Keep timeline content text-centered inside the centered wrapper,
       but allow the timeline's own tags (h1/h2/strong/u) to control text size/formatting. */
    .timeline-content {
      width: 100%;
      text-align: left; /* allow timeline author to use left-aligned text if needed */
      margin: 0 auto;
    }

    @media (max-width: 768px) {
      h1 { font-size: 2.4em; }
      #main-content { padding: 1rem; }
      .info-box { max-width: 100%; padding: 1rem; }
      .rules-list { grid-template-columns: 1fr; }
      .top-nav { right: 12px; top: 10px; gap: 8px; }
      .timeline-header { justify-content: center; } /* mobile: center back button */
    }
  </style>
</head>
<body>
  <!-- Top navigation with Timeline (no .html) and Discord -->
  <nav class="top-nav" aria-label="top navigation">
    <a class="nav-link" id="timeline-link" href="/timeline">Timeline</a>
    <a class="nav-link" href="https://dsc.gg/ashgrid" target="_blank" rel="noopener noreferrer">Discord</a>
  </nav>

  <!-- main content container: we'll swap this when loading timeline.html -->
  <main id="main-content" role="main" aria-labelledby="site-title">
    <div class="glitch-container">
      <h1 id="site-title">ASHGRID ANARCHY</h1>
    </div>

    <p class="subtitle">No Anti-cheat. No resets. True anarchy without the hate.</p>

    <div class="server-info" aria-label="server addresses">
      <div class="info-box" aria-labelledby="java-title">
        <h2 id="java-title">Java Edition</h2>

        <div class="server-address">
          <code>upsilon.myqnapcloud.com</code>
          <button class="copy-btn" data-copy="upsilon.myqnapcloud.com">Copy</button>
        </div>

        <div class="server-address">
          <code>phoenix.hageyexpress.xyz</code>
          <button class="copy-btn" data-copy="phoenix.hageyexpress.xyz">Copy</button>
        </div>

        <div class="server-address">
          <code>phoenix2.hageyexpress.xyz:3021</code>
          <button class="copy-btn" data-copy="phoenix2.hageyexpress.xyz:3021">Copy</button>
        </div>

        <p style="margin-top:0.6rem;">Connect using one of the domains above. Default Minecraft Java port (25565) is used unless your client requires a specific port.</p>
      </div>

      <div class="info-box" aria-labelledby="bedrock-title">
        <h2 id="bedrock-title">Bedrock Edition</h2>

        <h3>Server Name:</h3>
        <p><em>Set to whatever you prefer</em></p>

        <h3>Server Address:</h3>
        <div class="server-address">
          <code>upsilon.myqnapcloud.com</code>
          <button class="copy-btn" data-copy="upsilon.myqnapcloud.com">Copy</button>
        </div>
        <div class="server-address">
          <code>phoenix.hageyexpress.xyz</code>
          <button class="copy-btn" data-copy="phoenix.hageyexpress.xyz">Copy</button>
        </div>

        <h3>Port:</h3>
        <div class="server-address">
          <code>25565</code>
          <button class="copy-btn" data-copy="25565">Copy</button>
        </div>

        <div class="warning" role="note">
          <strong>Important:</strong> Be respectful to Bedrock players. They're part of our community too.
        </div>
      </div>
    </div>

    <section class="rules" aria-labelledby="rules-heading">
      <h2 id="rules-heading">SERVER RULES ‚Äî DETAILED BUT DISCORD-FRIENDLY (ANARCHY)</h2>

      <div class="rules-list">
        <div class="rule-item">
          <h3>1. NO DOXXING ‚Äî ZERO TOLERANCE</h3>
          <p>No sharing, requesting, hinting at, or threatening to reveal anyone‚Äôs personal info. Includes names, addresses, IPs, socials, private screenshots, anything identifiable. "Jokes" count. <strong>‚Üí Instant permanent ban. Alts banned too.</strong></p>
        </div>

        <div class="rule-item">
          <h3>2. NO HARASSMENT, SLURS, OR DISCRIMINATION</h3>
          <p>Anarchy = freedom in-game, not freedom to attack people. No slurs, hate speech, targeted harassment, or personal attacks. Trash talk is fine; real-life harassment is not. <strong>‚Üí Punishments scale with severity.</strong></p>
        </div>

        <div class="rule-item">
          <h3>3. NO SPAM OR CHAT DISRUPTION</h3>
          <p>No message flooding, repeated text, bot spam, or anything that derails chat. No advertising unless staff approves. <strong>‚Üí Minor spam = kick. Repeated = mute/ban.</strong></p>
        </div>

        <div class="rule-item">
          <h3>4. NO CRACKED OR ILLEGAL ACCOUNTS</h3>
          <p>Only legitimate, paid Minecraft accounts. No cracked clients, stolen alts, shared accounts, or auth bypass tools. <strong>‚Üí Auto-kick on join. Repeat = ban (from Discord server if you are in).</strong></p>
        </div>

        <div class="rule-item">
          <h3>5. NO SERVER-BREAKING ACTIONS</h3>
          <p>No DDoS, packet flooding, lag machines, crash exploits, or dupes that harm stability. If it risks uptime or performance, it‚Äôs banned. <strong>‚Üí Permanent ban, no appeal.</strong></p>
        </div>

        <div class="rule-item">
          <h3>6. COMMON SENSE &amp; STAFF AUTHORITY</h3>
          <p>If you think it breaks the rules, assume it does. Loopholing or "technically not breaking it" = breaking it. Staff decisions are final.</p>
        </div>

        <div class="rule-item">
          <h3>7. ANARCHY ‚â† LAWLESS</h3>
          <p>Grief, raid, steal, fight ‚Äî all allowed. Targeting real people or harming the server is not. Play wild, not destructive outside the game.</p>
        </div>
      </div>
    </section>

    <div class="terminal" aria-hidden="false">
      <div class="terminal-line">
        <span class="terminal-prompt">user@ashgrid:~$</span>
        <span class="terminal-command"> connect upsilon.myqnapcloud.com:25565</span>
      </div>
      <div class="terminal-line terminal-output">
        &gt; Establishing connection to Ashgrid Anarchy...
      </div>
      <div class="terminal-line terminal-output">
        &gt; Welcome to the chaos. Prepare for anything.
      </div>
      <div class="terminal-line terminal-output">
        &gt; Alternative (US proxy): phoenix2.hageyexpress.xyz:3021
      </div>
    </div>
  </main>

  <footer style="text-align: center; padding: 2rem 1rem;">
    <p>üíÄ Welcome to the hacker world. Have fun on Ashgrid! üíÄ</p>

    <!-- Server Status (static) -->
    <p style="margin-top: 0.5rem; font-size: 0.9em;">
      Server status:
      <span id="server-status" style="color: var(--secondary); font-weight: bold;">
        Online
      </span>
    </p>

    <!-- Status Page Link (restored) -->
    <p style="margin-top: 0.5rem; font-size: 0.9em;">
      Status page:
      <a href="https://hetrixtools.com/r/f7e96211d93d56089fa6640073fed230/"
         target="_blank"
         rel="noopener"
         style="color: var(--secondary); text-decoration: none;">
         hetrixtools status
      </a>
    </p>

    <!-- Discord -->
    <p style="margin-top: 0.5rem; font-size: 0.9em;">
      Join us on Discord:
      <a href="https://dsc.gg/ashgrid"
         target="_blank"
         rel="noopener noreferrer"
         style="color: var(--secondary); text-decoration: none;">
         https://dsc.gg/ashgrid
      </a>
    </p>
  </footer>

  <script>
    // Copy to clipboard functionality
    document.querySelectorAll('.copy-btn').forEach(button => {
      button.addEventListener('click', function() {
        const textToCopy = this.getAttribute('data-copy');

        // Create temporary input
        const tempInput = document.createElement('input');
        tempInput.value = textToCopy;
        document.body.appendChild(tempInput);

        // Select and copy
        tempInput.select();
        document.execCommand('copy');

        // Remove temporary input
        document.body.removeChild(tempInput);

        // Show feedback
        const originalText = this.textContent;
        this.textContent = 'Copied!';
        this.classList.add('copied');

        setTimeout(() => {
          this.textContent = originalText;
          this.classList.remove('copied');
        }, 1600);
      });
    });

    // Add some dynamic terminal text
    const terminal = document.querySelector('.terminal');
    const terminalOutput = terminal.querySelector('.terminal-output:last-child');

    // Simulate typing effect
    setTimeout(() => {
      terminalOutput.textContent = '&gt; Welcome to the chaos. Prepare for anything.';
    }, 800);

    /*******************************
     * Timeline SPA-style loader
     *
     * - Clicking the "Timeline" link fetches timeline.html
     *   and replaces the content inside #main-content while
     *   keeping the page background and centering.
     *
     * - We copy inline <style> blocks from timeline.html but
     *   filter out page-level/background rules so your background
     *   and layout are preserved.
     *
     * - A Back button is injected at the top of the timeline
     *   content. Restore removes injected styles and restores
     *   the original #main-content HTML.
     *******************************/
    (function() {
      const timelineLink = document.getElementById('timeline-link');
      const mainContent = document.getElementById('main-content');
      const originalContent = mainContent.innerHTML;
      const originalTitle = document.title;

      // Track <style> elements we inject so we can remove them on restore
      const injectedStyleElements = [];

      // Basic filter to remove rules that target body/html or set backgrounds/heights
      function filterTimelineCSS(cssText) {
        // split into blocks by '}' and keep blocks that do not contain banned tokens
        const banned = /\b(body|html|:root|background|background-image|background-color|min-height|height|min-width|width)\b/i;
        const blocks = cssText.split('}');
        const kept = blocks.map(b => b.trim()).filter(b => b.length > 0 && !banned.test(b)).map(b => b + '}');
        return kept.join('\n');
      }

      // Inject style text into document head and remember it
      function injectStyle(cssText) {
        const filtered = filterTimelineCSS(cssText);
        if (!filtered.trim()) return null;
        const styleEl = document.createElement('style');
        styleEl.setAttribute('data-timeline-style', 'true');
        styleEl.textContent = filtered;
        document.head.appendChild(styleEl);
        injectedStyleElements.push(styleEl);
        return styleEl;
      }

      // Clean up injected styles
      function removeInjectedStyles() {
        injectedStyleElements.forEach(el => {
          if (el && el.parentNode) el.parentNode.removeChild(el);
        });
        injectedStyleElements.length = 0;
      }

      // loadTimeline: fetch timeline.html and inject its <body> content while preserving text formatting
      async function loadTimeline(push = true) {
        try {
          const res = await fetch('timeline.html', { cache: 'no-cache' });
          if (!res.ok) throw new Error('Failed to load timeline');
          const text = await res.text();

          // Parse returned HTML and extract head styles and body content
          const parser = new DOMParser();
          const doc = parser.parseFromString(text, 'text/html');

          // Extract and inject <style> tags from the fetched doc's head
          const styleTags = [...doc.querySelectorAll('style')];
          styleTags.forEach(s => {
            try {
              injectStyle(s.textContent || '');
            } catch (e) { console.warn('style inject error', e); }
          });

          // NOTE: we intentionally DO NOT auto-load external <link rel="stylesheet"> files
          // to avoid changing your global background/layout. If you want to include them,
          // we can append them but filter or sandbox them.

          // Get body content; if the fetched doc included a full body, use that, otherwise fallback to text
          const newBodyHtml = doc.body ? doc.body.innerHTML : text;

          // Build a safe wrapper that keeps the main site's background & centering
          const wrapped = `
            <div class="timeline-wrapper" role="region" aria-label="timeline">
              <div class="timeline-header">
                <button id="timeline-back" class="nav-link">‚Üê Back</button>
              </div>
              <div class="timeline-content">
                ${newBodyHtml}
              </div>
            </div>
          `;

          // Inject into main content
          mainContent.innerHTML = wrapped;
          document.title = doc.title || 'Timeline';

          // push history state if requested
          if (push) {
            history.pushState({ page: 'timeline' }, document.title, '/timeline');
          }

          // Re-run any scripts from timeline (this mirrors previous behavior)
          const scripts = doc.querySelectorAll('script');
          scripts.forEach(s => {
            const inline = s.textContent;
            const src = s.getAttribute('src');
            if (src) {
              const scriptEl = document.createElement('script');
              scriptEl.src = src;
              // avoid blocking: add async attribute
              scriptEl.async = true;
              document.body.appendChild(scriptEl);
            } else if (inline) {
              try {
                // eslint-disable-next-line no-eval
                eval(inline);
              } catch (e) {
                console.warn('timeline script error', e);
              }
            }
          });

          // Hook up the Back button to restore home
          const backBtn = document.getElementById('timeline-back');
          if (backBtn) {
            backBtn.addEventListener('click', (ev) => {
              ev.preventDefault();
              restoreHome(true); // replace state so back behaves predictably
            });
          }

        } catch (err) {
          console.error(err);
          removeInjectedStyles();
          mainContent.innerHTML = `<div style="padding:2rem;"><h2 style="color:var(--primary);">Timeline load failed</h2><p>Could not load <code>timeline.html</code>. Check that the file exists and the path is correct.</p><p style="margin-top:1rem;"><a href="/" onclick="event.preventDefault(); location.href='/'">Return home</a></p></div>`;
          document.title = 'Timeline (failed)';
          if (push) history.pushState({ page: 'timeline' }, 'Timeline (failed)', '/timeline');
        }
      }

      // Restore original content (home)
      function restoreHome(replace = false) {
        // remove any styles we injected from timeline
        removeInjectedStyles();

        // restore the main content
        mainContent.innerHTML = originalContent;
        document.title = originalTitle;

        // If we restored due to Back button, replace the history entry so back/forward feel right
        if (replace) {
          history.replaceState(null, originalTitle, '/');
        }

        // Re-bind any behavior that the homepage relies on (copy buttons, terminal text, etc.)
        rebindHomeInteractions();
      }

      // Rebind JS behaviors that the homepage needs after restoring innerHTML
      function rebindHomeInteractions() {
        // Re-attach copy button handlers
        document.querySelectorAll('.copy-btn').forEach(button => {
          // remove previous listeners by cloning (cheap way) to avoid duplicates
          const newButton = button.cloneNode(true);
          button.parentNode.replaceChild(newButton, button);
        });

        // re-run the copy-to-clipboard setup
        document.querySelectorAll('.copy-btn').forEach(button => {
          button.addEventListener('click', function() {
            const textToCopy = this.getAttribute('data-copy');
            const tempInput = document.createElement('input');
            tempInput.value = textToCopy;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            const originalText = this.textContent;
            this.textContent = 'Copied!';
            this.classList.add('copied');
            setTimeout(() => {
              this.textContent = originalText;
              this.classList.remove('copied');
            }, 1600);
          });
        });

        // re-run terminal typing snippet
        const terminal = document.querySelector('.terminal');
        if (terminal) {
          const terminalOutput = terminal.querySelector('.terminal-output:last-child');
          if (terminalOutput) {
            setTimeout(() => {
              terminalOutput.textContent = '&gt; Welcome to the chaos. Prepare for anything.';
            }, 600);
          }
        }
      }

      // Intercept click on the timeline link (keeps SPA behavior)
      timelineLink.addEventListener('click', (ev) => {
        ev.preventDefault();
        // If already on timeline, do nothing
        if (location.pathname.endsWith('/timeline')) return;
        loadTimeline(true);
      });

      // Handle back / forward navigation
      window.addEventListener('popstate', (ev) => {
        const state = ev.state;
        if (state && state.page === 'timeline') {
          // if state says timeline, load it without pushing another history entry
          loadTimeline(false);
        } else {
          // otherwise restore original home content
          restoreHome();
        }
      });

      // If user landed directly on /timeline, attempt to load timeline.html automatically
      if (location.pathname.endsWith('/timeline')) {
        // Replace current state so popstate works predictably
        history.replaceState({ page: 'timeline' }, document.title, location.pathname);
        loadTimeline(false);
      }
    })();
  </script>
</body>
</html>
